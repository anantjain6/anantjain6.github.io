"use strict";
var Mi = {
    init: function() {
        this.Basic.init(), this.Components.init()
    },
    Basic: {
        init: function() {
            var e = this;
            Pace.on("done", function() {
                $("#page-loader").fadeOut(200), e.animations()
            }), e.mobileDetector(), e.backgrounds(), e.scroller(), e.masonry(), e.ajaxLoader(), e.mobileNav()
        },
        mobileDetector: function() {
            var e = {
                Android: function() {
                    return navigator.userAgent.match(/Android/i)
                },
                BlackBerry: function() {
                    return navigator.userAgent.match(/BlackBerry/i)
                },
                iOS: function() {
                    return navigator.userAgent.match(/iPhone|iPad|iPod/i)
                },
                Opera: function() {
                    return navigator.userAgent.match(/Opera Mini/i)
                },
                Windows: function() {
                    return navigator.userAgent.match(/IEMobile/i)
                },
                any: function() {
                    return e.Android() || e.BlackBerry() || e.iOS() || e.Opera() || e.Windows()
                }
            };
            window.trueMobile = e.any(), trueMobile && $("audio").remove()
        },
        backgrounds: function() {
            $(".bg-image").each(function() {
                var e = $(this).children("img").attr("src");
                $(this).css("background-image", "url(" + e + ")").children("img").hide()
            }), $(".bg-slideshow").owlCarousel({
                singleItem: !0,
                autoPlay: 4e3,
                pagination: !1,
                navigation: !1,
                navigationText: !1,
                slideSpeed: 1500,
                transitionStyle: "fade",
                mouseDrag: !1,
                touchDrag: !1
            })
        },
        animations: function() {
            $(".animated-hover").on("mouseenter", function() {
                var e = $(this).data("hover-animation"),
                    t = $(this).data("hover-animation-duration");
                $(this).stop().css({
                    "-webkit-animation-duration": t + "ms",
                    "animation-duration": t + "ms"
                }).addClass(e)
            }).on("mouseleave", function() {
                var e = ($(this), $(this).data("hover-animation"));
                $(this).data("hover-animation-duration");
                $(this).stop().removeAttr("style").removeClass(e)
            }), $(".animated").appear(function() {
                $(this).each(function() {
                    var e = $(this),
                        t = 200 + $(this).data("animation-delay");
                    setTimeout(function() {
                        e.addClass(e.data("animation")).addClass("visible")
                    }, t)
                })
            })
        },
        scroller: function() {
            var e = ($("#header"), $("#header").height()),
                t = ($("#mobile-nav"), $(".section", "#content")),
                a = $("body"),
                o = 0;
            a.hasClass("header-horizontal") && (o = -e);
            var i = $('#header, #mobile-nav, [data-target="local-scroll"]');
            i.find("a").on("click", function() {
                $(this).blur()
            }), i.localScroll({
                offset: o,
                duration: 800,
                easing: $("#content").data("scroll-easing")
            });
            var n = $("#main-menu li > a, #mobile-nav li > a"),
                r = function(e) {
                    n.each(function() {
                        var t = $(this).attr("href");
                        e == t ? $(this).addClass("active") : $(this).removeClass("active")
                    })
                };
            t.waypoint({
                handler: function(e) {
                    if ("up" == e) {
                        var t = "#" + this.element.id;
                        r(t)
                    }
                },
                offset: function() {
                    return a.hasClass("header-horizontal") ? -this.element.clientHeight + e : -this.element.clientHeight + 2
                }
            }), t.waypoint({
                handler: function(e) {
                    if ("down" == e) {
                        var t = "#" + this.element.id;
                        r(t)
                    }
                },
                offset: function() {
                    return a.hasClass("header-horizontal") ? e + 1 : 1
                }
            }), $(window).resize(function() {
                setTimeout(function() {
                    Waypoint.refreshAll()
                }, 600)
            })
        },
        masonry: function() {
            var e = $(".masonry");
            e.masonry({
                columnWidth: ".masonry-sizer",
                itemSelector: ".masonry-item",
                percentPosition: !0
            }), e.imagesLoaded().progress(function() {
                e.masonry("layout")
            }), e.on("layoutComplete", Waypoint.refreshAll())
        },
        ajaxLoader: function() {
            function e() {
                r.fadeIn(200, function() {
                    $("html").addClass("locked-scrolling")
                })
            }

            function t() {
                r.load(o)
            }

            function a() {
                s = !1, $("html").removeClass("locked-scrolling"), $("body").removeClass("ajax-modal-opened"), $(document).scrollTop(i), r.fadeOut(200).scrollTop(0)
            }
            var o, i, n = $("#ajax-loader"),
                r = $("#ajax-modal"),
                s = !1;
            $('[data-target="ajax-modal"]').on("click", function() {
                return s = !0, i = $(document).scrollTop(), o = $(this).attr("href"), t(), $("body").addClass("ajax-modal-opened"), !1
            }), $(document).ajaxStart(function() {
                s && n.fadeIn(200)
            }), $(document).ajaxStop(function() {
                s && n.fadeOut(200, function() {
                    e()
                })
            }), r.delegate('*[data-dismiss="close"]', "click", function() {
                return a(), !1
            })
        },
        mobileNav: function() {
            $('[data-target="mobile-nav"]').on("click", function() {
                return $("body").toggleClass("mobile-nav-open"), !1
            })
        }
    },
    Components: {
        init: function() {
            this.carousel(), this.modal(), this.chart(), this.progressBar(), this.tooltip(), this.popover(), this.messenger(), this.videoPlayer(), this.navToggleable(), this.navFilter()
        },
        modal: function() {
            $(".modal").on("show.bs.modal", function() {
                $("body").addClass("modal-opened")
            }), $(".modal").on("hide.bs.modal", function() {
                $("body").removeClass("modal-opened")
            }), $("#mapModal").on("shown.bs.modal", function() {
                google.maps.event.trigger(map, "resize")
            })
        },
        chart: function() {
            $(".chart").each(function() {
                var e = $(this).data("size");
                $(this).easyPieChart({
                    barColor: $(this).data("bar-color"),
                    trackColor: $(this).data("track-color"),
                    scaleColor: $(this).data("scale-color"),
                    size: e,
                    lineWidth: $(this).data("line-width"),
                    animate: 1e3,
                    onStep: function(e, t, a) {
                        $(this.el).find(".percent").text(Math.round(a))
                    }
                }).css({
                    width: e + "px",
                    height: e + "px"
                }).children(".percent").css("line-height", e + "px")
            }), $(".chart").appear(function() {
                $(this).each(function() {
                    var e = $(this);
                    e.hasClass("visible") || e.addClass("visible");
                    var t = $(this).data("value");
                    setTimeout(function() {
                        e.data("easyPieChart").update(t)
                    }, 200)
                })
            })
        },
        progressBar: function() {
            $(".progress-animated").appear(function() {
                var e = $(this).find(".progress-bar");
                e.each(function() {
                    setTimeout(function() {
                        var t = e.attr("aria-valuenow"),
                            a = 0;
                        setInterval(function() {
                            a++, t >= a && e.children("span").text(a + "%")
                        }, 15), e.css("width", t + "%")
                    }, 300)
                })
            })
        },
        carousel: function() {
            $(".carousel").owlCarousel({
                items: $(this).data("items"),
                itemsDesktop: $(this).data("items-desktop"),
                itemsDesktopSmall: !1,
                itemsTablet: $(this).data("items-tablet"),
                itemsMobile: $(this).data("items-mobile"),
                singleItem: $(this).data("single-item"),
                autoPlay: $(this).data("auto-play"),
                pagination: $(this).data("pagination"),
                stopOnHover: !0
            })
        },
        tooltip: function() {
            $("[data-toggle='tooltip']").tooltip()
        },
        popover: function() {
            $("[rel='popover']").popover()
        },
        videoPlayer: function() {
            var e = $(".video-player");
            e && e.YTPlayer(), trueMobile && e.hasClass("bg-video") && (e.prev(".bg-video-placeholder").show(), e.remove())
        },
        messenger: function() {
            $('[data-target="messenger"]').on("click", function() {
                var e = $("#messenger"),
                    t = $("#messenger-box");
                return e.hasClass("active") ? (t.find(".messenger-box-content").fadeOut(), e.fadeOut(300).removeClass("active")) : e.fadeIn(300, function() {
                    t.find(".messenger-box-content").fadeIn(400)
                }).addClass("active"), !1
            })
        },
        navToggleable: function() {
            $(".nav-toggleable > li.dropdown > a").on("click", function() {
                return $(this).parent("li").toggleClass("active"), !1
            })
        },
        navFilter: function() {
            var e = $(".nav-filter");
            e.on("click", "a", function() {
                var e = $($(this).parents(".nav-filter").data("filter-grid")),
                    t = $(this).attr("data-filter");
                return e.isotope({
                    filter: t
                }), $(this).parents(".nav").find(".active").removeClass("active"), $(this).parent("li").addClass("active"), !1
            })
        }
    }
};
$(document).ready(function() {
    Mi.init()
});